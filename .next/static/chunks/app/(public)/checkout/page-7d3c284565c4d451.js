(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3040],{6946:function(e,t,s){Promise.resolve().then(s.bind(s,8554))},8554:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var d=s(3827),r=s(4090),a=s(7907),i=s(8792),n=s(2670),c=s(1270),l=s(3391),o=s(6578),u=s(3879),m=s(527);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,s(7461).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var _=s(5754),x=s(5179),h=s(9842),f=s(7815),v=s(7934),g=s(474),j=s(844),y=s(4601),b=s(4526);let N=l.Ry({card_number:l.Z_().min(19,"Please enter a valid card number"),expiry:l.Z_().regex(/^\d{2}\/\d{2}$/,"Use MM/YY format"),cvc:l.Z_().length(3,"CVC must be 3 digits"),name_on_card:l.Z_().min(2,"Please enter the name on your card")});function S(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)().get("serviceId"),{user:s,isAuthenticated:l}=(0,g.t)(),{getServiceById:S}=(0,j.X)(),{addOrder:w}=(0,y.l)(),[Z,k]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),O=t?S(t):null,{register:P,handleSubmit:D,setValue:C,formState:{errors:B}}=(0,n.cI)({resolver:(0,c.F)(N),defaultValues:{card_number:"4242 4242 4242 4242",expiry:"12/28",cvc:"123",name_on_card:(null==s?void 0:s.full_name)||""}});if((0,r.useEffect)(()=>{l||e.push("/login?redirect=/checkout?serviceId="+t)},[l,e,t]),(0,r.useEffect)(()=>{(null==s?void 0:s.full_name)&&C("name_on_card",s.full_name)},[s,C]),!O)return(0,d.jsx)("div",{className:"section-padding",children:(0,d.jsxs)("div",{className:"container-custom text-center",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold",children:"Service Not Found"}),(0,d.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Please select a service to purchase."}),(0,d.jsx)(i.default,{href:"/services",className:"mt-4 inline-block",children:(0,d.jsx)(_.Button,{children:"Browse Services"})})]})});let F=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),s=t&&t[0]||"",d=[];for(let e=0,t=s.length;e<t;e+=4)d.push(s.substring(e,e+4));return d.length?d.join(" "):e},M=async t=>{s&&(k(!0),await (0,b.gw)(2e3),w(O.id,O.title,O.price,s.id),k(!1),I(!0),await (0,b.gw)(1500),e.push("/student"))};return T?(0,d.jsx)("div",{className:"section-padding",children:(0,d.jsxs)("div",{className:"container-custom max-w-md mx-auto text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,d.jsx)(o.Z,{className:"h-8 w-8 text-green-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold",children:"Payment Successful!"}),(0,d.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Your order has been placed. Redirecting to your dashboard..."})]})}):(0,d.jsx)("div",{className:"section-padding",children:(0,d.jsxs)("div",{className:"container-custom max-w-4xl",children:[(0,d.jsxs)(i.default,{href:"/services/".concat(O.id),className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-6",children:[(0,d.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Service"]}),(0,d.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),(0,d.jsxs)("div",{className:"grid lg:grid-cols-5 gap-8",children:[(0,d.jsx)("div",{className:"lg:col-span-3",children:(0,d.jsxs)(f.Zb,{children:[(0,d.jsx)(f.Ol,{children:(0,d.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,d.jsx)(m.Z,{className:"h-5 w-5"}),"Payment Details"]})}),(0,d.jsx)(f.aY,{children:(0,d.jsxs)("form",{onSubmit:D(M),className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h._,{htmlFor:"card_number",children:"Card Number"}),(0,d.jsx)(x.I,{id:"card_number",placeholder:"4242 4242 4242 4242",...P("card_number"),onChange:e=>{C("card_number",F(e.target.value))},maxLength:19}),B.card_number&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:B.card_number.message})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h._,{htmlFor:"expiry",children:"Expiry Date"}),(0,d.jsx)(x.I,{id:"expiry",placeholder:"MM/YY",...P("expiry"),maxLength:5}),B.expiry&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:B.expiry.message})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h._,{htmlFor:"cvc",children:"CVC"}),(0,d.jsx)(x.I,{id:"cvc",placeholder:"123",...P("cvc"),maxLength:3}),B.cvc&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:B.cvc.message})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h._,{htmlFor:"name_on_card",children:"Name on Card"}),(0,d.jsx)(x.I,{id:"name_on_card",placeholder:"John Smith",...P("name_on_card")}),B.name_on_card&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:B.name_on_card.message})]}),(0,d.jsx)(v.Z,{className:"my-6"}),(0,d.jsx)(_.Button,{type:"submit",className:"w-full",size:"lg",disabled:Z,children:Z?"Processing...":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p,{className:"h-4 w-4 mr-2"}),"Pay ",(0,b.T4)(O.price)]})}),(0,d.jsxs)("p",{className:"text-xs text-center text-muted-foreground flex items-center justify-center gap-1",children:[(0,d.jsx)(p,{className:"h-3 w-3"}),"Secured by Stripe. Your payment info is encrypted."]})]})})]})}),(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsxs)(f.Zb,{className:"sticky top-24",children:[(0,d.jsx)(f.Ol,{children:(0,d.jsx)(f.ll,{children:"Order Summary"})}),(0,d.jsxs)(f.aY,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium",children:O.title}),(0,d.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[O.category," â€¢ ",O.delivery_days," day delivery"]})]}),(0,d.jsx)(v.Z,{}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,d.jsx)("span",{children:(0,b.T4)(O.price)})]}),(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Processing Fee"}),(0,d.jsx)("span",{children:"$0.00"})]})]}),(0,d.jsx)(v.Z,{}),(0,d.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,d.jsx)("span",{children:"Total"}),(0,d.jsx)("span",{children:(0,b.T4)(O.price)})]})]})]})})]})]})})}function w(){return(0,d.jsx)("div",{className:"section-padding",children:(0,d.jsx)("div",{className:"container-custom text-center",children:(0,d.jsx)("h1",{className:"text-2xl font-bold",children:"Loading checkout..."})})})}function Z(){return(0,d.jsx)(r.Suspense,{fallback:(0,d.jsx)(w,{}),children:(0,d.jsx)(S,{})})}},5179:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var d=s(3827),r=s(4090),a=s(4526);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,d.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},9842:function(e,t,s){"use strict";s.d(t,{_:function(){return l}});var d=s(3827),r=s(4090),a=s(6028),i=s(9769),n=s(4526);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,d.jsx)(a.f,{ref:t,className:(0,n.cn)(c(),s),...r})});l.displayName=a.f.displayName},7218:function(e,t,s){"use strict";s.d(t,{np:function(){return d},xB:function(){return r}});let d=[{id:"ord_001",student_id:"usr_student_001",service_id:"srv_001",service_title:"Student Visa Assistance",status:"completed",total_amount:299,payment_id:"pay_abc123xyz",created_at:"2024-01-20T10:30:00Z",updated_at:"2024-02-03T15:45:00Z",notes:"All documents verified. Visa approved on Feb 3rd.",documents:[{id:"doc_001",name:"passport_scan.pdf",size:2048576,type:"application/pdf",url:"/uploads/passport_scan.pdf",uploaded_at:"2024-01-21T09:00:00Z",uploaded_by:"student"},{id:"doc_002",name:"admission_letter.pdf",size:1536e3,type:"application/pdf",url:"/uploads/admission_letter.pdf",uploaded_at:"2024-01-21T09:15:00Z",uploaded_by:"student"}],deliverables:[{id:"del_001",name:"visa_approval_letter.pdf",size:512e3,type:"application/pdf",url:"/deliverables/visa_approval_letter.pdf",uploaded_at:"2024-02-03T15:30:00Z",uploaded_by:"admin"}]},{id:"ord_002",student_id:"usr_student_001",service_id:"srv_002",service_title:"Airport Pickup Service",status:"in_progress",total_amount:75,payment_id:"pay_def456uvw",created_at:"2024-02-25T14:00:00Z",updated_at:"2024-02-26T10:00:00Z",notes:"Driver assigned. Flight details confirmed. Pickup scheduled for March 1st.",documents:[],deliverables:[]},{id:"ord_003",student_id:"usr_student_001",service_id:"srv_004",service_title:"Student Bank Account Setup",status:"pending",total_amount:49,payment_id:"pay_ghi789rst",created_at:"2024-02-28T16:30:00Z",updated_at:"2024-02-28T16:30:00Z",notes:void 0,documents:[],deliverables:[]},{id:"ord_004",student_id:"usr_student_002",service_id:"srv_003",service_title:"Student Housing Package",status:"in_progress",total_amount:199,payment_id:"pay_jkl012mno",created_at:"2024-02-20T11:00:00Z",updated_at:"2024-02-27T09:30:00Z",notes:"Property viewings scheduled for this week.",documents:[{id:"doc_003",name:"university_id.jpg",size:1024e3,type:"image/jpeg",url:"/uploads/university_id.jpg",uploaded_at:"2024-02-21T10:00:00Z",uploaded_by:"student"}],deliverables:[]},{id:"ord_005",student_id:"usr_student_003",service_id:"srv_006",service_title:"SIM Card & Phone Setup",status:"completed",total_amount:35,payment_id:"pay_pqr345stu",created_at:"2024-02-15T08:00:00Z",updated_at:"2024-02-16T14:00:00Z",notes:"SIM activated. Number: +1 555-999-8888",documents:[],deliverables:[{id:"del_002",name:"activation_confirmation.pdf",size:256e3,type:"application/pdf",url:"/deliverables/activation_confirmation.pdf",uploaded_at:"2024-02-16T14:00:00Z",uploaded_by:"admin"}]}],r=[{id:"txn_001",order_id:"ord_001",service_title:"Student Visa Assistance",amount:299,status:"completed",date:"2024-01-20T10:30:00Z",invoice_url:"/invoices/inv_001.pdf"},{id:"txn_002",order_id:"ord_002",service_title:"Airport Pickup Service",amount:75,status:"completed",date:"2024-02-25T14:00:00Z",invoice_url:"/invoices/inv_002.pdf"},{id:"txn_003",order_id:"ord_003",service_title:"Student Bank Account Setup",amount:49,status:"completed",date:"2024-02-28T16:30:00Z",invoice_url:"/invoices/inv_003.pdf"}]},4601:function(e,t,s){"use strict";s.d(t,{l:function(){return n}});var d=s(2020),r=s(5249),a=s(7218),i=s(4526);let n=(0,d.Ue)()((0,r.tJ)((e,t)=>({orders:a.np,addOrder:(t,s,d,r)=>{let a={id:(0,i.dI)(),student_id:r,service_id:t,service_title:s,status:"pending",total_amount:d,payment_id:(0,i.Kx)(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),documents:[],deliverables:[]};return e(e=>({orders:[a,...e.orders]})),console.log("Order created:",a.id),a},updateOrderStatus:(t,s,d)=>{e(e=>({orders:e.orders.map(e=>e.id===t?{...e,status:s,notes:d||e.notes,updated_at:new Date().toISOString()}:e)})),console.log("Order updated:",t,s)},addDocument:(t,s)=>{let d={...s,id:"doc_".concat(Math.random().toString(36).substring(2,9)),uploaded_at:new Date().toISOString()};e(e=>({orders:e.orders.map(e=>e.id===t?{...e,documents:[...e.documents,d],updated_at:new Date().toISOString()}:e)})),console.log("Document added to order:",t)},addDeliverable:(t,s)=>{let d={...s,id:"del_".concat(Math.random().toString(36).substring(2,9)),uploaded_at:new Date().toISOString()};e(e=>({orders:e.orders.map(e=>e.id===t?{...e,deliverables:[...e.deliverables,d],updated_at:new Date().toISOString()}:e)})),console.log("Deliverable added to order:",t)},getOrderById:e=>t().orders.find(t=>t.id===e),getOrdersByStudentId:e=>t().orders.filter(t=>t.student_id===e),getOrdersByStatus:e=>t().orders.filter(t=>t.status===e)}),{name:"orders-storage"}))},527:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s(7461).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}},function(e){e.O(0,[4233,5250,2793,7752,1908,2971,8069,1744],function(){return e(e.s=6946)}),_N_E=e.O()}]);