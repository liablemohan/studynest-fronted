(()=>{var e={};e.id=40,e.ids=[40],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=s(482),a=s(9108),d=s(2563),i=s.n(d),n=s(8300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["(public)",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6406)),"/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/(public)/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8247)),"/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/(public)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1429)),"/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/not-found.tsx"]}],o=["/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/(public)/checkout/page.tsx"],u="/(public)/checkout/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(public)/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5832:(e,t,s)=>{Promise.resolve().then(s.bind(s,8854))},8854:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5344),a=s(3729),d=s(8428),i=s(6506),n=s(708),l=s(5453),c=s(2374),o=s(7060),u=s(3024),p=s(5674);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,s(9224).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var x=s(6212),_=s(2549),h=s(6448),g=s(1351),v=s(6868),f=s(1505),y=s(3247),j=s(5861),b=s(779);let N=c.Ry({card_number:c.Z_().min(19,"Please enter a valid card number"),expiry:c.Z_().regex(/^\d{2}\/\d{2}$/,"Use MM/YY format"),cvc:c.Z_().length(3,"CVC must be 3 digits"),name_on_card:c.Z_().min(2,"Please enter the name on your card")});function S(){let e=(0,d.useRouter)(),t=(0,d.useSearchParams)().get("serviceId"),{user:s,isAuthenticated:c}=(0,f.t)(),{getServiceById:S}=(0,y.X)(),{addOrder:k}=(0,j.l)(),[w,Z]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),I=t?S(t):null,{register:D,handleSubmit:O,setValue:M,formState:{errors:C}}=(0,n.cI)({resolver:(0,l.F)(N),defaultValues:{card_number:"4242 4242 4242 4242",expiry:"12/28",cvc:"123",name_on_card:s?.full_name||""}});if((0,a.useEffect)(()=>{c||e.push("/login?redirect=/checkout?serviceId="+t)},[c,e,t]),(0,a.useEffect)(()=>{s?.full_name&&M("name_on_card",s.full_name)},[s,M]),!I)return r.jsx("div",{className:"section-padding",children:(0,r.jsxs)("div",{className:"container-custom text-center",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Service Not Found"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Please select a service to purchase."}),r.jsx(i.default,{href:"/services",className:"mt-4 inline-block",children:r.jsx(x.Button,{children:"Browse Services"})})]})});let q=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),s=t&&t[0]||"",r=[];for(let e=0,t=s.length;e<t;e+=4)r.push(s.substring(e,e+4));return r.length?r.join(" "):e},A=async t=>{s&&(Z(!0),await (0,b.gw)(2e3),k(I.id,I.title,I.price,s.id),Z(!1),T(!0),await (0,b.gw)(1500),e.push("/student"))};return P?r.jsx("div",{className:"section-padding",children:(0,r.jsxs)("div",{className:"container-custom max-w-md mx-auto text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(o.Z,{className:"h-8 w-8 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Payment Successful!"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Your order has been placed. Redirecting to your dashboard..."})]})}):r.jsx("div",{className:"section-padding",children:(0,r.jsxs)("div",{className:"container-custom max-w-4xl",children:[(0,r.jsxs)(i.default,{href:`/services/${I.id}`,className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-6",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Service"]}),r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-5 gap-8",children:[r.jsx("div",{className:"lg:col-span-3",children:(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:(0,r.jsxs)(g.ll,{className:"flex items-center gap-2",children:[r.jsx(p.Z,{className:"h-5 w-5"}),"Payment Details"]})}),r.jsx(g.aY,{children:(0,r.jsxs)("form",{onSubmit:O(A),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"card_number",children:"Card Number"}),r.jsx(_.I,{id:"card_number",placeholder:"4242 4242 4242 4242",...D("card_number"),onChange:e=>{M("card_number",q(e.target.value))},maxLength:19}),C.card_number&&r.jsx("p",{className:"text-sm text-red-500",children:C.card_number.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"expiry",children:"Expiry Date"}),r.jsx(_.I,{id:"expiry",placeholder:"MM/YY",...D("expiry"),maxLength:5}),C.expiry&&r.jsx("p",{className:"text-sm text-red-500",children:C.expiry.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"cvc",children:"CVC"}),r.jsx(_.I,{id:"cvc",placeholder:"123",...D("cvc"),maxLength:3}),C.cvc&&r.jsx("p",{className:"text-sm text-red-500",children:C.cvc.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"name_on_card",children:"Name on Card"}),r.jsx(_.I,{id:"name_on_card",placeholder:"John Smith",...D("name_on_card")}),C.name_on_card&&r.jsx("p",{className:"text-sm text-red-500",children:C.name_on_card.message})]}),r.jsx(v.Z,{className:"my-6"}),r.jsx(x.Button,{type:"submit",className:"w-full",size:"lg",disabled:w,children:w?"Processing...":(0,r.jsxs)(r.Fragment,{children:[r.jsx(m,{className:"h-4 w-4 mr-2"}),"Pay ",(0,b.T4)(I.price)]})}),(0,r.jsxs)("p",{className:"text-xs text-center text-muted-foreground flex items-center justify-center gap-1",children:[r.jsx(m,{className:"h-3 w-3"}),"Secured by Stripe. Your payment info is encrypted."]})]})})]})}),r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)(g.Zb,{className:"sticky top-24",children:[r.jsx(g.Ol,{children:r.jsx(g.ll,{children:"Order Summary"})}),(0,r.jsxs)(g.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium",children:I.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[I.category," â€¢ ",I.delivery_days," day delivery"]})]}),r.jsx(v.Z,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),r.jsx("span",{children:(0,b.T4)(I.price)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Processing Fee"}),r.jsx("span",{children:"$0.00"})]})]}),r.jsx(v.Z,{}),(0,r.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:(0,b.T4)(I.price)})]})]})]})})]})]})})}function k(){return r.jsx("div",{className:"section-padding",children:r.jsx("div",{className:"container-custom text-center",children:r.jsx("h1",{className:"text-2xl font-bold",children:"Loading checkout..."})})})}function w(){return r.jsx(a.Suspense,{fallback:r.jsx(k,{}),children:r.jsx(S,{})})}},2549:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var r=s(5344),a=s(3729),d=s(779);let i=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},6448:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var r=s(5344),a=s(3729),d=s(1675),i=s(9247),n=s(779);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>r.jsx(d.f,{ref:s,className:(0,n.cn)(l(),e),...t}));c.displayName=d.f.displayName},736:(e,t,s)=>{"use strict";s.d(t,{np:()=>r,xB:()=>a});let r=[{id:"ord_001",student_id:"usr_student_001",service_id:"srv_001",service_title:"Student Visa Assistance",status:"completed",total_amount:299,payment_id:"pay_abc123xyz",created_at:"2024-01-20T10:30:00Z",updated_at:"2024-02-03T15:45:00Z",notes:"All documents verified. Visa approved on Feb 3rd.",documents:[{id:"doc_001",name:"passport_scan.pdf",size:2048576,type:"application/pdf",url:"/uploads/passport_scan.pdf",uploaded_at:"2024-01-21T09:00:00Z",uploaded_by:"student"},{id:"doc_002",name:"admission_letter.pdf",size:1536e3,type:"application/pdf",url:"/uploads/admission_letter.pdf",uploaded_at:"2024-01-21T09:15:00Z",uploaded_by:"student"}],deliverables:[{id:"del_001",name:"visa_approval_letter.pdf",size:512e3,type:"application/pdf",url:"/deliverables/visa_approval_letter.pdf",uploaded_at:"2024-02-03T15:30:00Z",uploaded_by:"admin"}]},{id:"ord_002",student_id:"usr_student_001",service_id:"srv_002",service_title:"Airport Pickup Service",status:"in_progress",total_amount:75,payment_id:"pay_def456uvw",created_at:"2024-02-25T14:00:00Z",updated_at:"2024-02-26T10:00:00Z",notes:"Driver assigned. Flight details confirmed. Pickup scheduled for March 1st.",documents:[],deliverables:[]},{id:"ord_003",student_id:"usr_student_001",service_id:"srv_004",service_title:"Student Bank Account Setup",status:"pending",total_amount:49,payment_id:"pay_ghi789rst",created_at:"2024-02-28T16:30:00Z",updated_at:"2024-02-28T16:30:00Z",notes:void 0,documents:[],deliverables:[]},{id:"ord_004",student_id:"usr_student_002",service_id:"srv_003",service_title:"Student Housing Package",status:"in_progress",total_amount:199,payment_id:"pay_jkl012mno",created_at:"2024-02-20T11:00:00Z",updated_at:"2024-02-27T09:30:00Z",notes:"Property viewings scheduled for this week.",documents:[{id:"doc_003",name:"university_id.jpg",size:1024e3,type:"image/jpeg",url:"/uploads/university_id.jpg",uploaded_at:"2024-02-21T10:00:00Z",uploaded_by:"student"}],deliverables:[]},{id:"ord_005",student_id:"usr_student_003",service_id:"srv_006",service_title:"SIM Card & Phone Setup",status:"completed",total_amount:35,payment_id:"pay_pqr345stu",created_at:"2024-02-15T08:00:00Z",updated_at:"2024-02-16T14:00:00Z",notes:"SIM activated. Number: +1 555-999-8888",documents:[],deliverables:[{id:"del_002",name:"activation_confirmation.pdf",size:256e3,type:"application/pdf",url:"/deliverables/activation_confirmation.pdf",uploaded_at:"2024-02-16T14:00:00Z",uploaded_by:"admin"}]}],a=[{id:"txn_001",order_id:"ord_001",service_title:"Student Visa Assistance",amount:299,status:"completed",date:"2024-01-20T10:30:00Z",invoice_url:"/invoices/inv_001.pdf"},{id:"txn_002",order_id:"ord_002",service_title:"Airport Pickup Service",amount:75,status:"completed",date:"2024-02-25T14:00:00Z",invoice_url:"/invoices/inv_002.pdf"},{id:"txn_003",order_id:"ord_003",service_title:"Student Bank Account Setup",amount:49,status:"completed",date:"2024-02-28T16:30:00Z",invoice_url:"/invoices/inv_003.pdf"}]},5861:(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var r=s(3158),a=s(7023),d=s(736),i=s(779);let n=(0,r.Ue)()((0,a.tJ)((e,t)=>({orders:d.np,addOrder:(t,s,r,a)=>{let d={id:(0,i.dI)(),student_id:a,service_id:t,service_title:s,status:"pending",total_amount:r,payment_id:(0,i.Kx)(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),documents:[],deliverables:[]};return e(e=>({orders:[d,...e.orders]})),console.log("Order created:",d.id),d},updateOrderStatus:(t,s,r)=>{e(e=>({orders:e.orders.map(e=>e.id===t?{...e,status:s,notes:r||e.notes,updated_at:new Date().toISOString()}:e)})),console.log("Order updated:",t,s)},addDocument:(t,s)=>{let r={...s,id:`doc_${Math.random().toString(36).substring(2,9)}`,uploaded_at:new Date().toISOString()};e(e=>({orders:e.orders.map(e=>e.id===t?{...e,documents:[...e.documents,r],updated_at:new Date().toISOString()}:e)})),console.log("Document added to order:",t)},addDeliverable:(t,s)=>{let r={...s,id:`del_${Math.random().toString(36).substring(2,9)}`,uploaded_at:new Date().toISOString()};e(e=>({orders:e.orders.map(e=>e.id===t?{...e,deliverables:[...e.deliverables,r],updated_at:new Date().toISOString()}:e)})),console.log("Deliverable added to order:",t)},getOrderById:e=>t().orders.find(t=>t.id===e),getOrdersByStudentId:e=>t().orders.filter(t=>t.student_id===e),getOrdersByStatus:e=>t().orders.filter(t=>t.status===e)}),{name:"orders-storage"}))},5674:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>d,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`/Users/mohankumar/Desktop/project_bhag/studynest-frontend/app/(public)/checkout/page.tsx`),{__esModule:a,$$typeof:d}=r,i=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[111,589,90,893,569],()=>s(3577));module.exports=r})();